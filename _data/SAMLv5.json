{
    "swagger": "2.0",
    "info": {
        "title": "ID-porten SAML Assertion v5",
        "description": "SAML-profil som støtter innlogging med utenlandsk eID gjennom eIDAS-infrastrukuren. Denne SAML-profilen er berre tilgjengeleg for tenesteeigarar som ber om det. ID-porten er basert på SAML2 Web Browswer SSO profile.",
        "version": "5.0.0"
    },
    "host": "www.difi.no",
    "schemes": [
        "https"
    ],
    "basePath": "/v1",
    "produces": [
        "application/saml2"
    ],
    "paths": {
        "/AuthnRequest": {
            "get": {
                "summary": "Autentiseringsførespurnad",
                "description": "UENDRA frå vanlege authnrequests til ID-porten",
                "parameters": [
                    {
                        "name": "forceAuth",
                        "in": "query",
                        "description": "Om vi skal tvinge ny autentisering selv om brukeren har en aktiv SSO-sesjon i ID-porten",
                        "type": "string"
                    }
                ],
                "responses": {
                    "302": {
                        "description": "Redirect med artifact id"
                    },
                    "default": {
                        "description": "hoi"
                    }
                }
            }
        },
        "/ArtifactResolve": {
            "get": {
                "summary": "Autentiserings-respons",
                "description": "Oppslag på bak-kanal for å laste ned informasjon om autentisert bruker",
                "parameters": [
                    {
                        "name": "artifactid",
                        "in": "query",
                        "description": "artifact utlevert frå id-porten frå '#/paths/AuthnRequest'.",
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Vellukka oppslag på bakkanal",
                        "schema": {
                            "$ref": "#/definitions/AttributeStatement"
                        }
                    },
                    "default": {
                        "description": "feil"
                    }
                }
            }
        }
    },
    "definitions": {
        "AttributeStatement": {
            "type": "object",
            "description": "Attributter for den autentiserte brukeren. (/SamlResponse/Assertion/AttributeStatement/)",
            "properties": {
                "uid": {
                    "type": "string",
                    "description": "Norsk personidentifikator.  (Fødselsnummer eller D-nummer)",
					"example": "31125012345"
                },
                "IdentityMatch": {
                    "type": "string",
                    "description": "Kvalitetsindikator for kobling ('matching') mot norsk personidentifikator.",
                    "enum": [
                        {"UNAMBIGUOS": "Identifikator fra utenlandsk eID'en har en entydig kobling mot identitet i Den Sentrale Folkeregister"},
                        {"BEST_EFFORT": "Attributter fra utenlandsk eID er benyttet til koble mot sannsynlig identitet i Det Sentrale Folkeregister.  (For eksempel: navn og fødselsdato stemmer med en person i DSF)"},
                        {"CACHED": "Kobling mot norsk personidentifikator er basert på lagret informasjon i ID-porten, og ikke som del av denne innloggingen.  (dette kan typisk skje ved integrasjonsfeil mellom ID-porten og DSF) "},
                        {"ERROR": "Det oppstod en feil ved forsøket på å koble utenlandsk eID mot norsk personidentifikator (Dette kan skje feks ved feil i kommuniksajonen mellom ID-porten og Det Sentrale Folkeregisteret"},
						"NOT_FOUND":"Ingen treff ved forsøk på kobling av utenlandsk eID mot norsk personidentifikator i Det Sentrale Folkereigster)",
                        {"SELF_DECLARED": "Norsk personidentifikator er basert på opplysninger som brukeren selv har oppgitt (Brukeren har for eksempel koblet sin Facebook-konto med ID-porten"}
                    ],
					"example": "UNAMBIGUOUS"
                },
                "SecurityLevel": {
                    "type": "string",
                    "description": "sikkerhetsnivå brukt ved innlogging.  [= 3,4 eller substational eller high for eIDAS.]",
					"example":"high"
                },
                "eidas-PersonIdentifier": {
                    "type": "string",
                    "description": "Unik identifikator levert av utenlandsk eID.",
                    "example": "SE/NO/fdsf43255"
                },
                "eidas-CurrentFamilyName": {
                    "type": "string",
                    "description": "Gjeldande etternavn for eidas-brukere",
					"example":"Smith"
                },
                "eidas-CurrentGivenName": {
                    "type": "string",
                    "description": "Gjeldande fornavn for eidas-brukere",
					"example":"John"
                },
                "eidas-DateOfBirth": {
                    "type": "string",
                    "description": "Fødselsdato for eidas-brukere.  (TODO sepsifisere datoformat)"
					"example":"1987-12-31"
                }
            }
        }
    }
}